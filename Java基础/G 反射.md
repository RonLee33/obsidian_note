# 一、反射概述

## 1.1 反射的出现背景

Java程序中，所有的对象都有两种类型：编译时类型和运行时类型，而很多时候对象的编译时类型和运行时类型不一致。

例如：某些变量或形参（如下例代码中的obj）的声明类型是Object类型，但是程序却需要调用该对象运行时类型`String`的方法`startWith()`，该方法不是Object中的方法：
```java
Object obj = new String("hello"); 
obj.startWith("h");
```

那么如何解决呢？

解决这个问题，有两种方案：

方案1：在编译和运行时都完全知道类型的具体信息，在这种情况下，我们可以直接先使用instanceof运算符进行判断，再利用强制类型转换符将其转换成运行时类型的变量即可。

方案2：编译时根本无法预知该对象和类的真实信息，程序只能依靠运行时信息来发现该对象和类的真实信息，这就必须使用反射。

## 1.2 反射过程简述

反射：即通过 Java提供的Reflection API 去操作已经运行在内存中的字节码中的的运行时类的内部属性和方法

非反射时：通过`new`的方式创建运行时对象；
反射：通过Reflection API 获取无法事先（即编译时）准确获取、只能在运行时才能知道具体类型的运行时类型，此类型是`Classs`类的实例，再通过此类型去动态地按需生成所需类型的对象，以实现多变的需求。从这点上看，Java的反射有点像动态语言`Python`的动态特性。

## 1.3 反射的优缺点

1. 优点：
>  提高了Java程序的灵活性和扩展性，降低了耦合性，提高自适应能力；
>  允许程序创建和控制任何类的对象，无需提前硬编码目标类（即动态性）,反射机制主要应用在对灵活性和扩展性要求很高的系统框架上。

2. 缺点：
> 反射的性能较低。
> 反射会模糊程序内部逻辑，可读性较差。

## 二、Reflection API

